// math.js
(function($){
Type.registerNamespace('Custom');Custom.Epsilon=function(){}
Custom.PI=function(){}
Custom.GoldenRatio=function(){}
Custom.Pythagoras=function(){}
Custom.Vector=function(x,y,z){this.x=x;this.y=y;this.z=z;}
Custom.Vector.angle=function(center,point){var $0=point.x-center.x;var $1=point.y-center.y;var $2=Math.atan(Math.abs($0/$1));if($0<0&&$1<0){$2=Custom.PI.value+$2;}else if($0<0){$2=2*Custom.PI.value-$2;}else if($1<0){$2=Custom.PI.value-$2;}return $2;}
Custom.Vector.calcControl=function(context,midA,midB,ending){var $0=(context.x-midA.x);var $1=(midB.x-ending.x);var $2=(context.y-midA.y);var $3=(midB.y-ending.y);var $4=$0*$3-$2*$1;var $5=(context.x*midA.y-context.y*midA.x);var $6=(midB.x*ending.y-midB.y*ending.x);var $7=($5*$1-$0*$6)/$4;var $8=($5*$3-$2*$6)/$4;var $9=context.z+(ending.z-context.z)/2;return new Custom.Vector($7,$8,$9);}
Custom.Vector.prototype={x:0,y:0,z:0,length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);},normalize:function(){var $0=this.length();this.x=this.x/$0;this.y=this.y/$0;this.z=this.z/$0;},crossProduct:function(vector){return new Custom.Vector(this.y*vector.z-this.z*vector.y,this.z*vector.x-this.x*vector.z,this.x*vector.y-this.y*vector.x);},image:function(){return new Custom.Vector(-this.x,-this.y,-this.z);},plot:function(r){return new Custom.Vector(this.x*r,this.y*r,this.z*r);},rotate:function(vector,sin,cos){var $0=1-cos;var $1=this.x;var $2=this.y;var $3=this.z;var $4=$1*$1;var $5=$2*$2;var $6=$3*$3;var $7=$2*$3;var $8=$3*$1;var $9=$1*$2;var $A=cos+$4*$0;var $B=$9*$0-$3*sin;var $C=$8*$0+$2*sin;var $D=$9*$0+$3*sin;var $E=cos+$5*$0;var $F=$7*$0-$1*sin;var $10=$8*$0-$2*sin;var $11=$7*$0+$1*sin;var $12=cos+$6*$0;var $13=$A*vector.x+$B*vector.y+$C*vector.z;var $14=$D*vector.x+$E*vector.y+$F*vector.z;var $15=$10*vector.x+$11*vector.y+$12*vector.z;return new Custom.Vector($13,$14,$15);},rotateX:function(cos,sin){var $0=cos*this.y-sin*this.z;var $1=sin*this.y+cos*this.z;this.y=$0;this.z=$1;this.normalize();},rotateY:function(cos,sin){var $0=cos*this.x+sin*this.z;var $1=cos*this.z-sin*this.x;this.x=$0;this.z=$1;this.normalize();},rotateZ:function(cos,sin){var $0=cos*this.x-sin*this.y;var $1=sin*this.x+cos*this.y;this.x=$0;this.y=$1;this.normalize();},toString:function(){return '(x: '+this.x.toString()+'; y: '+this.y.toString()+'; z: '+this.z.toString()+')';},translate:function(v){return new Custom.Vector(v.x+this.x,v.y+this.y,v.z+this.z);},dotProduct:function(v){return new Custom.Vector(v.x*this.x,v.y*this.y,v.z*this.z);}}
Custom.Epsilon.registerClass('Custom.Epsilon');Custom.PI.registerClass('Custom.PI');Custom.GoldenRatio.registerClass('Custom.GoldenRatio');Custom.Pythagoras.registerClass('Custom.Pythagoras');Custom.Vector.registerClass('Custom.Vector');Custom.Epsilon.value=1E-10;Custom.PI.value=Math.PI;Custom.PI.twice=2*Custom.PI.value;Custom.PI.half=Custom.PI.value/2;Custom.GoldenRatio.value=(1+Math.sqrt(5))/2;Custom.GoldenRatio.inverse=1/Custom.GoldenRatio.value;Custom.Pythagoras.value=Math.sqrt(2);Custom.Pythagoras.half=Custom.Pythagoras.value/2;})(jQuery);// This script was generated using Script# v0.7.4.0
